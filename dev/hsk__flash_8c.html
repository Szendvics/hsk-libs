<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hsk-libs-dev: hsk_flash/hsk_flash.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hsk-libs-dev
   &#160;<span id="projectnumber">270</span>
   </div>
   <div id="projectbrief">High Speed Karlsruhe XC878 library collection</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c7ba009e8f625f49e696f17143a27bf0.html">hsk_flash</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">hsk_flash.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>HSK Flash Facility implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;Infineon/XC878.h&gt;</code><br />
<code>#include &quot;<a class="el" href="hsk__flash_8h_source.html">hsk_flash.h</a>&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="hsk__isr_8h_source.html">../hsk_isr/hsk_isr.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for hsk_flash.c:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="hsk__flash_8c__incl.svg" width="495" height="187"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad593c8c7333fb78aec67c4e147cde3f1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#ad593c8c7333fb78aec67c4e147cde3f1">MOVCI</a>&#160;&#160;&#160;.db 0xA5</td></tr>
<tr class="memdesc:ad593c8c7333fb78aec67c4e147cde3f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">MOVC @(DPTR++),A instruction.  <a href="#ad593c8c7333fb78aec67c4e147cde3f1">More...</a><br /></td></tr>
<tr class="separator:ad593c8c7333fb78aec67c4e147cde3f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab473c021012356601a12f5c91b09f10a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#ab473c021012356601a12f5c91b09f10a">DPL</a>&#160;&#160;&#160;dpl</td></tr>
<tr class="memdesc:ab473c021012356601a12f5c91b09f10a"><td class="mdescLeft">&#160;</td><td class="mdescRight">DPTR low byte.  <a href="#ab473c021012356601a12f5c91b09f10a">More...</a><br /></td></tr>
<tr class="separator:ab473c021012356601a12f5c91b09f10a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa93f5c922cabf33b1f76450494373702"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#aa93f5c922cabf33b1f76450494373702">DPH</a>&#160;&#160;&#160;dph</td></tr>
<tr class="memdesc:aa93f5c922cabf33b1f76450494373702"><td class="mdescLeft">&#160;</td><td class="mdescRight">DPTR high byte.  <a href="#aa93f5c922cabf33b1f76450494373702">More...</a><br /></td></tr>
<tr class="separator:aa93f5c922cabf33b1f76450494373702"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2c9286c943d66d51926643b4aff8afa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#ae2c9286c943d66d51926643b4aff8afa">VAR_AT</a>(type,  name,  addr)&#160;&#160;&#160;type __at(addr) name</td></tr>
<tr class="memdesc:ae2c9286c943d66d51926643b4aff8afa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create variable at a certain address, SDCC version.  <a href="#ae2c9286c943d66d51926643b4aff8afa">More...</a><br /></td></tr>
<tr class="separator:ae2c9286c943d66d51926643b4aff8afa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a5e611929450e2fd5aafd72751fb82d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a9a5e611929450e2fd5aafd72751fb82d">VAR_ASM</a>(name)&#160;&#160;&#160;_##name</td></tr>
<tr class="memdesc:a9a5e611929450e2fd5aafd72751fb82d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert global variable address into inline assembler SDCC style.  <a href="#a9a5e611929450e2fd5aafd72751fb82d">More...</a><br /></td></tr>
<tr class="separator:a9a5e611929450e2fd5aafd72751fb82d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a3caa7861303a0ed52e5f0e47bbccf3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a4a3caa7861303a0ed52e5f0e47bbccf3">PAGE_RAM</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a4a3caa7861303a0ed52e5f0e47bbccf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF code page that has the Boot ROM and XRAM mapped into it.  <a href="#a4a3caa7861303a0ed52e5f0e47bbccf3">More...</a><br /></td></tr>
<tr class="separator:a4a3caa7861303a0ed52e5f0e47bbccf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af060d3595d8641ca35a256f2a8bb7838"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#af060d3595d8641ca35a256f2a8bb7838">PAGE_FLASH</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:af060d3595d8641ca35a256f2a8bb7838"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF code page that has the flash.  <a href="#af060d3595d8641ca35a256f2a8bb7838">More...</a><br /></td></tr>
<tr class="separator:af060d3595d8641ca35a256f2a8bb7838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b4027102912178a416ef0e7d33ef88"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a34b4027102912178a416ef0e7d33ef88">ADDR_PFLASH</a>&#160;&#160;&#160;0x0000</td></tr>
<tr class="memdesc:a34b4027102912178a416ef0e7d33ef88"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF start address of the P-Flash.  <a href="#a34b4027102912178a416ef0e7d33ef88">More...</a><br /></td></tr>
<tr class="separator:a34b4027102912178a416ef0e7d33ef88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a390ee3ef9811e2ea114921e1b94af3d2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a390ee3ef9811e2ea114921e1b94af3d2">LEN_PFLASH</a>&#160;&#160;&#160;(60u &lt;&lt; 10)</td></tr>
<tr class="memdesc:a390ee3ef9811e2ea114921e1b94af3d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF length of the P-Flash.  <a href="#a390ee3ef9811e2ea114921e1b94af3d2">More...</a><br /></td></tr>
<tr class="separator:a390ee3ef9811e2ea114921e1b94af3d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab39ff9f54b1ec22b2cd87b36934a174f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#ab39ff9f54b1ec22b2cd87b36934a174f">BYTES_PAGE_PFLASH</a>&#160;&#160;&#160;(1 &lt;&lt; 9)</td></tr>
<tr class="memdesc:ab39ff9f54b1ec22b2cd87b36934a174f"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF the number of bytes in a P-Flash page.  <a href="#ab39ff9f54b1ec22b2cd87b36934a174f">More...</a><br /></td></tr>
<tr class="separator:ab39ff9f54b1ec22b2cd87b36934a174f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6f8614f4892322abe0aa5a0f208c43"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a7d6f8614f4892322abe0aa5a0f208c43">BYTES_WORDLINE_PFLASH</a>&#160;&#160;&#160;(1 &lt;&lt; 6)</td></tr>
<tr class="memdesc:a7d6f8614f4892322abe0aa5a0f208c43"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF the number of bytes in a P-Flash wordline.  <a href="#a7d6f8614f4892322abe0aa5a0f208c43">More...</a><br /></td></tr>
<tr class="separator:a7d6f8614f4892322abe0aa5a0f208c43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec02072c11353fc94c3e0555ec2b4c51"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#aec02072c11353fc94c3e0555ec2b4c51">ADDR_DFLASH</a>&#160;&#160;&#160;0xF000</td></tr>
<tr class="memdesc:aec02072c11353fc94c3e0555ec2b4c51"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF start address of the D-Flash.  <a href="#aec02072c11353fc94c3e0555ec2b4c51">More...</a><br /></td></tr>
<tr class="separator:aec02072c11353fc94c3e0555ec2b4c51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace3e91566d4b07c07b7cb87aa640e9b2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#ace3e91566d4b07c07b7cb87aa640e9b2">LEN_DFLASH</a>&#160;&#160;&#160;(4u &lt;&lt; 10)</td></tr>
<tr class="memdesc:ace3e91566d4b07c07b7cb87aa640e9b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF length of the D-Flash.  <a href="#ace3e91566d4b07c07b7cb87aa640e9b2">More...</a><br /></td></tr>
<tr class="separator:ace3e91566d4b07c07b7cb87aa640e9b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaceb4fddcbdde6b5986abf7494372139"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#aaceb4fddcbdde6b5986abf7494372139">BYTES_PAGE_DFLASH</a>&#160;&#160;&#160;(1 &lt;&lt; 6)</td></tr>
<tr class="memdesc:aaceb4fddcbdde6b5986abf7494372139"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF the number of bytes in a D-Flash page.  <a href="#aaceb4fddcbdde6b5986abf7494372139">More...</a><br /></td></tr>
<tr class="separator:aaceb4fddcbdde6b5986abf7494372139"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44fcc5bbafc00057fe1932fe6d44a064"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a44fcc5bbafc00057fe1932fe6d44a064">BYTES_WORDLINE_DFLASH</a>&#160;&#160;&#160;(1 &lt;&lt; 5)</td></tr>
<tr class="memdesc:a44fcc5bbafc00057fe1932fe6d44a064"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF ld() of the number of bytes in a D-Flash wordline.  <a href="#a44fcc5bbafc00057fe1932fe6d44a064">More...</a><br /></td></tr>
<tr class="separator:a44fcc5bbafc00057fe1932fe6d44a064"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ec6a85c7923292056fd3ccde710f484"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a5ec6a85c7923292056fd3ccde710f484">ADDR_ROM</a>&#160;&#160;&#160;0xC000</td></tr>
<tr class="memdesc:a5ec6a85c7923292056fd3ccde710f484"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF start address of the Boot ROM.  <a href="#a5ec6a85c7923292056fd3ccde710f484">More...</a><br /></td></tr>
<tr class="separator:a5ec6a85c7923292056fd3ccde710f484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37b985d4517c943d40917f19aa13b439"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a37b985d4517c943d40917f19aa13b439">LEN_ROM</a>&#160;&#160;&#160;(8u &lt;&lt; 10)</td></tr>
<tr class="memdesc:a37b985d4517c943d40917f19aa13b439"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF length of the Boot ROM.  <a href="#a37b985d4517c943d40917f19aa13b439">More...</a><br /></td></tr>
<tr class="separator:a37b985d4517c943d40917f19aa13b439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a155e5aed4a7a7a47de665ecb18fcadd5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a155e5aed4a7a7a47de665ecb18fcadd5">ADDR_XRAM</a>&#160;&#160;&#160;0xF000</td></tr>
<tr class="memdesc:a155e5aed4a7a7a47de665ecb18fcadd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF start address of the XRAM.  <a href="#a155e5aed4a7a7a47de665ecb18fcadd5">More...</a><br /></td></tr>
<tr class="separator:a155e5aed4a7a7a47de665ecb18fcadd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa468037c6c8e20085d90dbedeacfc0cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#aa468037c6c8e20085d90dbedeacfc0cc">LEN_XRAM</a>&#160;&#160;&#160;(3u &lt;&lt; 10)</td></tr>
<tr class="memdesc:aa468037c6c8e20085d90dbedeacfc0cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">XC878-16FF length of the XRAM.  <a href="#aa468037c6c8e20085d90dbedeacfc0cc">More...</a><br /></td></tr>
<tr class="separator:aa468037c6c8e20085d90dbedeacfc0cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85e11881e343671f85e132d3e922e8c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a85e11881e343671f85e132d3e922e8c1">BIT_PROG</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a85e11881e343671f85e132d3e922e8c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">FCON/EECON Program Bit.  <a href="#a85e11881e343671f85e132d3e922e8c1">More...</a><br /></td></tr>
<tr class="separator:a85e11881e343671f85e132d3e922e8c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff22c8a8699660896c046b71f1da1f7f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#aff22c8a8699660896c046b71f1da1f7f">BIT_ERASE</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:aff22c8a8699660896c046b71f1da1f7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">FCON/EECON Erase Bit.  <a href="#aff22c8a8699660896c046b71f1da1f7f">More...</a><br /></td></tr>
<tr class="separator:aff22c8a8699660896c046b71f1da1f7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f333d4a000e95f5ef3ec7a6b2a41fad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a5f333d4a000e95f5ef3ec7a6b2a41fad">BIT_MAS1</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a5f333d4a000e95f5ef3ec7a6b2a41fad"><td class="mdescLeft">&#160;</td><td class="mdescRight">FCON/EECON Mass Erase Bit.  <a href="#a5f333d4a000e95f5ef3ec7a6b2a41fad">More...</a><br /></td></tr>
<tr class="separator:a5f333d4a000e95f5ef3ec7a6b2a41fad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7306904c5f52abeb2daa946227b9b424"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a7306904c5f52abeb2daa946227b9b424">BIT_NVSTR</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:a7306904c5f52abeb2daa946227b9b424"><td class="mdescLeft">&#160;</td><td class="mdescRight">FCON/EECON Non-Volatile Store Bit.  <a href="#a7306904c5f52abeb2daa946227b9b424">More...</a><br /></td></tr>
<tr class="separator:a7306904c5f52abeb2daa946227b9b424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45fd1e5d3b972abac99fa379d5252a51"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a45fd1e5d3b972abac99fa379d5252a51">BIT_YE</a>&#160;&#160;&#160;5</td></tr>
<tr class="memdesc:a45fd1e5d3b972abac99fa379d5252a51"><td class="mdescLeft">&#160;</td><td class="mdescRight">FCON/EECON Y-Address Enable Bit.  <a href="#a45fd1e5d3b972abac99fa379d5252a51">More...</a><br /></td></tr>
<tr class="separator:a45fd1e5d3b972abac99fa379d5252a51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29e342b96822b9119eaa3f2f5ee3ec92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a29e342b96822b9119eaa3f2f5ee3ec92">BIT_EEBSY</a>&#160;&#160;&#160;6</td></tr>
<tr class="memdesc:a29e342b96822b9119eaa3f2f5ee3ec92"><td class="mdescLeft">&#160;</td><td class="mdescRight">EECON D-Flash Busy Bit.  <a href="#a29e342b96822b9119eaa3f2f5ee3ec92">More...</a><br /></td></tr>
<tr class="separator:a29e342b96822b9119eaa3f2f5ee3ec92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10b1969a2af446cd20b4aca90d6856cd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a10b1969a2af446cd20b4aca90d6856cd">BIT_FTEN</a>&#160;&#160;&#160;5</td></tr>
<tr class="memdesc:a10b1969a2af446cd20b4aca90d6856cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">FCS Flash Timer Enable Bit.  <a href="#a10b1969a2af446cd20b4aca90d6856cd">More...</a><br /></td></tr>
<tr class="separator:a10b1969a2af446cd20b4aca90d6856cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c4005e70612e6f180c8acfe32e0159d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a0c4005e70612e6f180c8acfe32e0159d">BIT_EEABORT</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a0c4005e70612e6f180c8acfe32e0159d"><td class="mdescLeft">&#160;</td><td class="mdescRight">FCS1 D-Flash Program/Erase Abort bit.  <a href="#a0c4005e70612e6f180c8acfe32e0159d">More...</a><br /></td></tr>
<tr class="separator:a0c4005e70612e6f180c8acfe32e0159d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eb44b05242f1173450d7dd09c134b0b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a6eb44b05242f1173450d7dd09c134b0b">BIT_OFVAL</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a6eb44b05242f1173450d7dd09c134b0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">FTVAL Overflow Value bits.  <a href="#a6eb44b05242f1173450d7dd09c134b0b">More...</a><br /></td></tr>
<tr class="separator:a6eb44b05242f1173450d7dd09c134b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad41761f52336eae7096a734d59a19ef6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#ad41761f52336eae7096a734d59a19ef6">CNT_OFVAL</a>&#160;&#160;&#160;7</td></tr>
<tr class="memdesc:ad41761f52336eae7096a734d59a19ef6"><td class="mdescLeft">&#160;</td><td class="mdescRight">OFVAL bit count.  <a href="#ad41761f52336eae7096a734d59a19ef6">More...</a><br /></td></tr>
<tr class="separator:ad41761f52336eae7096a734d59a19ef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0774d200453d65557ef39d97a02fa411"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a0774d200453d65557ef39d97a02fa411">BIT_MODE</a>&#160;&#160;&#160;7</td></tr>
<tr class="memdesc:a0774d200453d65557ef39d97a02fa411"><td class="mdescLeft">&#160;</td><td class="mdescRight">FTVAL MODE bit.  <a href="#a0774d200453d65557ef39d97a02fa411">More...</a><br /></td></tr>
<tr class="separator:a0774d200453d65557ef39d97a02fa411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88871f1916dc8943866ccac5916a74f7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a88871f1916dc8943866ccac5916a74f7">BIT_NMIFLASH</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a88871f1916dc8943866ccac5916a74f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">NMICON Flash Timer NMI Enable bit.  <a href="#a88871f1916dc8943866ccac5916a74f7">More...</a><br /></td></tr>
<tr class="separator:a88871f1916dc8943866ccac5916a74f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafff27c7165f059a969fe60fee51f683"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#aafff27c7165f059a969fe60fee51f683">STATE_IDLE</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:aafff27c7165f059a969fe60fee51f683"><td class="mdescLeft">&#160;</td><td class="mdescRight">The state to use when nothing is to be done.  <a href="#aafff27c7165f059a969fe60fee51f683">More...</a><br /></td></tr>
<tr class="separator:aafff27c7165f059a969fe60fee51f683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1df21239e296048dbf9042363ea9dd5c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a1df21239e296048dbf9042363ea9dd5c">STATE_REQUEST</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a1df21239e296048dbf9042363ea9dd5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The state to use to kick off a write.  <a href="#a1df21239e296048dbf9042363ea9dd5c">More...</a><br /></td></tr>
<tr class="separator:a1df21239e296048dbf9042363ea9dd5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3bd49a6808ba1a64a446fdd14cb2a21"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#ac3bd49a6808ba1a64a446fdd14cb2a21">STATE_DETECT</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:ac3bd49a6808ba1a64a446fdd14cb2a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">The state that decides whether a delete or idle is appropriate.  <a href="#ac3bd49a6808ba1a64a446fdd14cb2a21">More...</a><br /></td></tr>
<tr class="separator:ac3bd49a6808ba1a64a446fdd14cb2a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7c1751184e92365d47d7f26e539be6c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#ab7c1751184e92365d47d7f26e539be6c">STATE_WRITE</a>&#160;&#160;&#160;20</td></tr>
<tr class="memdesc:ab7c1751184e92365d47d7f26e539be6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The state to use when starting to write to the D-Flash.  <a href="#ab7c1751184e92365d47d7f26e539be6c">More...</a><br /></td></tr>
<tr class="separator:ab7c1751184e92365d47d7f26e539be6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f99d85aaa3c31f57a9bc9771ac3c185"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a3f99d85aaa3c31f57a9bc9771ac3c185">STATE_DELETE</a>&#160;&#160;&#160;40</td></tr>
<tr class="memdesc:a3f99d85aaa3c31f57a9bc9771ac3c185"><td class="mdescLeft">&#160;</td><td class="mdescRight">The state to use when erasing D-Flash pages.  <a href="#a3f99d85aaa3c31f57a9bc9771ac3c185">More...</a><br /></td></tr>
<tr class="separator:a3f99d85aaa3c31f57a9bc9771ac3c185"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca5b07fcfc6232419b09792f733b45a3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#aca5b07fcfc6232419b09792f733b45a3">STATE_RESET</a>&#160;&#160;&#160;60</td></tr>
<tr class="memdesc:aca5b07fcfc6232419b09792f733b45a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The state to use when mass erasing the D-Flash.  <a href="#aca5b07fcfc6232419b09792f733b45a3">More...</a><br /></td></tr>
<tr class="separator:aca5b07fcfc6232419b09792f733b45a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a599547a02bb0ec807dc6f487fa24c13c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a599547a02bb0ec807dc6f487fa24c13c">FREE_LATEST</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a599547a02bb0ec807dc6f487fa24c13c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The block indicated <a class="el" href="hsk__flash_8c.html#ac45ee148a627c5381a1d3efc38b3eb68">hsk_flash::latest</a> is available for writing.  <a href="#a599547a02bb0ec807dc6f487fa24c13c">More...</a><br /></td></tr>
<tr class="separator:a599547a02bb0ec807dc6f487fa24c13c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dcf2308535779a6a92b0fd3578b4c87"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a6dcf2308535779a6a92b0fd3578b4c87">FREE_BEHIND</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a6dcf2308535779a6a92b0fd3578b4c87"><td class="mdescLeft">&#160;</td><td class="mdescRight">The block behind the block indicated by <a class="el" href="hsk__flash_8c.html#ac45ee148a627c5381a1d3efc38b3eb68">hsk_flash::latest</a> is available for writing.  <a href="#a6dcf2308535779a6a92b0fd3578b4c87">More...</a><br /></td></tr>
<tr class="separator:a6dcf2308535779a6a92b0fd3578b4c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409d7efdeab550837d2c82bc84bd33fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a409d7efdeab550837d2c82bc84bd33fd">FREE_NONE</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a409d7efdeab550837d2c82bc84bd33fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">There is no block available for writing.  <a href="#a409d7efdeab550837d2c82bc84bd33fd">More...</a><br /></td></tr>
<tr class="separator:a409d7efdeab550837d2c82bc84bd33fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a77546a0379b312a73b5a107fc9b196c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a77546a0379b312a73b5a107fc9b196c1">hsk_flash_isr_nmiflash</a> (void)</td></tr>
<tr class="memdesc:a77546a0379b312a73b5a107fc9b196c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash delete/write state machine.  <a href="#a77546a0379b312a73b5a107fc9b196c1">More...</a><br /></td></tr>
<tr class="separator:a77546a0379b312a73b5a107fc9b196c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc2074fa68d4da24fb483fbd49438da9"><td class="memItemLeft" align="right" valign="top">ubyte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#acc2074fa68d4da24fb483fbd49438da9">hsk_flash_init</a> (void *const <a class="el" href="hsk__flash_8c.html#aeb05b4bef946b7e657493024adb51321">ptr</a>, const uword <a class="el" href="hsk__flash_8c.html#a1ed0c25d910b90b08428b6aeafb43ee9">size</a>, const ubyte version)</td></tr>
<tr class="memdesc:acc2074fa68d4da24fb483fbd49438da9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recovers a struct from a previous session and sets everything up for storage of changes.  <a href="#acc2074fa68d4da24fb483fbd49438da9">More...</a><br /></td></tr>
<tr class="separator:acc2074fa68d4da24fb483fbd49438da9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a01af82333ae82b381cd939fcd421f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a36a01af82333ae82b381cd939fcd421f">hsk_flash_write</a> (void)</td></tr>
<tr class="memdesc:a36a01af82333ae82b381cd939fcd421f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the current data to the D-Flash.  <a href="#a36a01af82333ae82b381cd939fcd421f">More...</a><br /></td></tr>
<tr class="separator:a36a01af82333ae82b381cd939fcd421f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8a49b1a169dc95a28adc1175c6db0f30"><td class="memItemLeft" align="right" valign="top">static const ubyte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a8a49b1a169dc95a28adc1175c6db0f30">dflash</a> [(4u&lt;&lt; 10)]</td></tr>
<tr class="memdesc:a8a49b1a169dc95a28adc1175c6db0f30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bytewise access to the D-Flash area.  <a href="#a8a49b1a169dc95a28adc1175c6db0f30">More...</a><br /></td></tr>
<tr class="separator:a8a49b1a169dc95a28adc1175c6db0f30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93d2892a22773262b195e008861f261c"><td class="memItemLeft" align="right" valign="top">SFR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a93d2892a22773262b195e008861f261c">FCON</a> = 0xD1</td></tr>
<tr class="memdesc:a93d2892a22773262b195e008861f261c"><td class="mdescLeft">&#160;</td><td class="mdescRight">P-Flash Control Register.  <a href="#a93d2892a22773262b195e008861f261c">More...</a><br /></td></tr>
<tr class="separator:a93d2892a22773262b195e008861f261c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb1378f9b2bfec0d3fb6786c5fd2da47"><td class="memItemLeft" align="right" valign="top">SFR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#afb1378f9b2bfec0d3fb6786c5fd2da47">EECON</a> = 0xD2</td></tr>
<tr class="memdesc:afb1378f9b2bfec0d3fb6786c5fd2da47"><td class="mdescLeft">&#160;</td><td class="mdescRight">D-Flash Control Register.  <a href="#afb1378f9b2bfec0d3fb6786c5fd2da47">More...</a><br /></td></tr>
<tr class="separator:afb1378f9b2bfec0d3fb6786c5fd2da47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4472d2e34acc50d38c971464610dc5c"><td class="memItemLeft" align="right" valign="top">SFR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#ab4472d2e34acc50d38c971464610dc5c">FCS</a> = 0xD3</td></tr>
<tr class="memdesc:ab4472d2e34acc50d38c971464610dc5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash Control and Status Register.  <a href="#ab4472d2e34acc50d38c971464610dc5c">More...</a><br /></td></tr>
<tr class="separator:ab4472d2e34acc50d38c971464610dc5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0025990727790627ee5d2fdbc19a5895"><td class="memItemLeft" align="right" valign="top">SFR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a0025990727790627ee5d2fdbc19a5895">FEAL</a> = 0xD4</td></tr>
<tr class="memdesc:a0025990727790627ee5d2fdbc19a5895"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash Error Address Register Low.  <a href="#a0025990727790627ee5d2fdbc19a5895">More...</a><br /></td></tr>
<tr class="separator:a0025990727790627ee5d2fdbc19a5895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0a93ca1e1f7fae6564ddaec0808851"><td class="memItemLeft" align="right" valign="top">SFR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a4a0a93ca1e1f7fae6564ddaec0808851">FEAH</a> = 0xD5</td></tr>
<tr class="memdesc:a4a0a93ca1e1f7fae6564ddaec0808851"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash Error Address Register High.  <a href="#a4a0a93ca1e1f7fae6564ddaec0808851">More...</a><br /></td></tr>
<tr class="separator:a4a0a93ca1e1f7fae6564ddaec0808851"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cc750e8fe87de54fc32bd1b5b27cad4"><td class="memItemLeft" align="right" valign="top">SFR16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a6cc750e8fe87de54fc32bd1b5b27cad4">FEALH</a> = 0xD4</td></tr>
<tr class="memdesc:a6cc750e8fe87de54fc32bd1b5b27cad4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash Error Address Register Low and High (16 bits).  <a href="#a6cc750e8fe87de54fc32bd1b5b27cad4">More...</a><br /></td></tr>
<tr class="separator:a6cc750e8fe87de54fc32bd1b5b27cad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a525bb521474158f60045c9be8e202417"><td class="memItemLeft" align="right" valign="top">SFR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a525bb521474158f60045c9be8e202417">FTVAL</a> = 0xD6</td></tr>
<tr class="memdesc:a525bb521474158f60045c9be8e202417"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash Timer Value Register.  <a href="#a525bb521474158f60045c9be8e202417">More...</a><br /></td></tr>
<tr class="separator:a525bb521474158f60045c9be8e202417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa93dd3cdb675ba294a57e8e55d9f751a"><td class="memItemLeft" align="right" valign="top">SFR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#aa93dd3cdb675ba294a57e8e55d9f751a">FCS1</a> = 0xDD</td></tr>
<tr class="memdesc:aa93dd3cdb675ba294a57e8e55d9f751a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash Control and Status Register 1.  <a href="#aa93dd3cdb675ba294a57e8e55d9f751a">More...</a><br /></td></tr>
<tr class="separator:aa93dd3cdb675ba294a57e8e55d9f751a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7169dec2a062f35b48b53a5a6d765f4"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:a87008b12398d1422a2120b64f5310e2c"><td class="memItemLeft" >&#160;&#160;&#160;ubyte *&#160;&#160;&#160;<a class="el" href="hsk__flash_8c.html#aeb05b4bef946b7e657493024adb51321">ptr</a></td></tr>
<tr class="memdesc:a87008b12398d1422a2120b64f5310e2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The pointer to the data structure to persist.  <a href="#a87008b12398d1422a2120b64f5310e2c">More...</a><br /></td></tr>
<tr class="separator:a87008b12398d1422a2120b64f5310e2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3425bb1188257d4199cff5f0efefbcd7"><td class="memItemLeft" >&#160;&#160;&#160;uword&#160;&#160;&#160;<a class="el" href="hsk__flash_8c.html#a1ed0c25d910b90b08428b6aeafb43ee9">size</a></td></tr>
<tr class="memdesc:a3425bb1188257d4199cff5f0efefbcd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the data structure to persist.  <a href="#a3425bb1188257d4199cff5f0efefbcd7">More...</a><br /></td></tr>
<tr class="separator:a3425bb1188257d4199cff5f0efefbcd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29afdf0b5e0344cd5e7d2f6baa846ab7"><td class="memItemLeft" >&#160;&#160;&#160;uword&#160;&#160;&#160;<a class="el" href="hsk__flash_8c.html#a471604319e7b5eda76de9e949a9af404">wrap</a></td></tr>
<tr class="memdesc:a29afdf0b5e0344cd5e7d2f6baa846ab7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The useable amount of D-Flash.  <a href="#a29afdf0b5e0344cd5e7d2f6baa846ab7">More...</a><br /></td></tr>
<tr class="separator:a29afdf0b5e0344cd5e7d2f6baa846ab7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08a0eb6dc332fd98d19df8a4fbc96b36"><td class="memItemLeft" >&#160;&#160;&#160;uword&#160;&#160;&#160;<a class="el" href="hsk__flash_8c.html#aa05f5967d4691b0fcd9920dfaa56106d">oldest</a></td></tr>
<tr class="memdesc:a08a0eb6dc332fd98d19df8a4fbc96b36"><td class="mdescLeft">&#160;</td><td class="mdescRight">The offset of the oldest data in the D-Flash.  <a href="#a08a0eb6dc332fd98d19df8a4fbc96b36">More...</a><br /></td></tr>
<tr class="separator:a08a0eb6dc332fd98d19df8a4fbc96b36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4924ba134c0b49ba2b9e248a9697a38d"><td class="memItemLeft" >&#160;&#160;&#160;uword&#160;&#160;&#160;<a class="el" href="hsk__flash_8c.html#ac45ee148a627c5381a1d3efc38b3eb68">latest</a></td></tr>
<tr class="memdesc:a4924ba134c0b49ba2b9e248a9697a38d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The offset of the latest data in the D-Flash.  <a href="#a4924ba134c0b49ba2b9e248a9697a38d">More...</a><br /></td></tr>
<tr class="separator:a4924ba134c0b49ba2b9e248a9697a38d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a967eee7112f4a4e2f6bebb68e9d4bf4b"><td class="memItemLeft" >&#160;&#160;&#160;ubyte&#160;&#160;&#160;<a class="el" href="hsk__flash_8c.html#a220be22f3a009b06f7a50f16ca1b61d6">free</a></td></tr>
<tr class="memdesc:a967eee7112f4a4e2f6bebb68e9d4bf4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This byte indicates where free space can be found in the D-Flash.  <a href="#a967eee7112f4a4e2f6bebb68e9d4bf4b">More...</a><br /></td></tr>
<tr class="separator:a967eee7112f4a4e2f6bebb68e9d4bf4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a929f5738e4fa3139983770043c1097cf"><td class="memItemLeft" >&#160;&#160;&#160;ubyte&#160;&#160;&#160;<a class="el" href="hsk__flash_8c.html#a52c92ae81f8d5f16d15422fb3838fe27">ident</a></td></tr>
<tr class="memdesc:a929f5738e4fa3139983770043c1097cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">The prefix/postfix to identify the data structure in the flash.  <a href="#a929f5738e4fa3139983770043c1097cf">More...</a><br /></td></tr>
<tr class="separator:a929f5738e4fa3139983770043c1097cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82a7710e6c9bee74598d9ea04d9171d9"><td class="memItemLeft" >&#160;&#160;&#160;ubyte&#160;&#160;&#160;<a class="el" href="hsk__flash_8c.html#a6f76333f788c209cea43c4410335d980">state</a></td></tr>
<tr class="memdesc:a82a7710e6c9bee74598d9ea04d9171d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current state of the flash ISR state machine.  <a href="#a82a7710e6c9bee74598d9ea04d9171d9">More...</a><br /></td></tr>
<tr class="separator:a82a7710e6c9bee74598d9ea04d9171d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7169dec2a062f35b48b53a5a6d765f4"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#af7169dec2a062f35b48b53a5a6d765f4">flash</a></td></tr>
<tr class="memdesc:af7169dec2a062f35b48b53a5a6d765f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the persistence configuration.  <a href="#af7169dec2a062f35b48b53a5a6d765f4">More...</a><br /></td></tr>
<tr class="separator:af7169dec2a062f35b48b53a5a6d765f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a051e65e6d6116e77db20018284566d93"><td class="memItemLeft" align="right" valign="top">static volatile ubyte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#a051e65e6d6116e77db20018284566d93">flashDptr</a></td></tr>
<tr class="memdesc:a051e65e6d6116e77db20018284566d93"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pointer to the flash target address.  <a href="#a051e65e6d6116e77db20018284566d93">More...</a><br /></td></tr>
<tr class="separator:a051e65e6d6116e77db20018284566d93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb373a158f1c3aba3ecf318594ef9345"><td class="memItemLeft" align="right" valign="top">static volatile ubyte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hsk__flash_8c.html#afb373a158f1c3aba3ecf318594ef9345">xdataDptr</a></td></tr>
<tr class="memdesc:afb373a158f1c3aba3ecf318594ef9345"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pointer to the xdata src address.  <a href="#afb373a158f1c3aba3ecf318594ef9345">More...</a><br /></td></tr>
<tr class="separator:afb373a158f1c3aba3ecf318594ef9345"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>HSK Flash Facility implementation. </p>
<p>This file implements the flash management functions defined in <a class="el" href="hsk__flash_8h.html" title="HSK Flash Facility headers. ">hsk_flash.h</a>.</p>
<dl class="section author"><dt>Author</dt><dd>kami</dd></dl>
<h1><a class="anchor" id="flash_registers"></a>
Flash Registers</h1>
<p>All registers are in the mapped register are, i.e. RMAP=1 must be set to access them.</p>
<h1><a class="anchor" id="flash_timer"></a>
Flash Timer</h1>
<p>Non-blocking flash reading/writing is controlled by a dedicated flash timer. Timings, especially flash writing, are so critical that all the flash delete/write procedures are implemented in a single state machine within <a class="el" href="hsk__flash_8c.html#a77546a0379b312a73b5a107fc9b196c1" title="Flash delete/write state machine. ">hsk_flash_isr_nmiflash()</a>, which is called by a non-maskable interrupt upon timer overflow.</p>
<h1><a class="anchor" id="flash_dptr"></a>
DPTR Byte Order</h1>
<p>Due to the <a class="el" href="hsk__flash_8h.html#flash_byte_order">Byte Order</a> differences between SDCC and C51, the <a class="el" href="hsk__flash_8c.html#ab473c021012356601a12f5c91b09f10a">DPL</a> and <a class="el" href="hsk__flash_8c.html#aa93f5c922cabf33b1f76450494373702">DPH</a> macros are used to adjust DPTR assignments in inline assembler. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aec02072c11353fc94c3e0555ec2b4c51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec02072c11353fc94c3e0555ec2b4c51">&sect;&nbsp;</a></span>ADDR_DFLASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADDR_DFLASH&#160;&#160;&#160;0xF000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF start address of the D-Flash. </p>

</div>
</div>
<a id="a34b4027102912178a416ef0e7d33ef88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34b4027102912178a416ef0e7d33ef88">&sect;&nbsp;</a></span>ADDR_PFLASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADDR_PFLASH&#160;&#160;&#160;0x0000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF start address of the P-Flash. </p>

</div>
</div>
<a id="a5ec6a85c7923292056fd3ccde710f484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ec6a85c7923292056fd3ccde710f484">&sect;&nbsp;</a></span>ADDR_ROM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADDR_ROM&#160;&#160;&#160;0xC000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF start address of the Boot ROM. </p>

</div>
</div>
<a id="a155e5aed4a7a7a47de665ecb18fcadd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a155e5aed4a7a7a47de665ecb18fcadd5">&sect;&nbsp;</a></span>ADDR_XRAM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADDR_XRAM&#160;&#160;&#160;0xF000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF start address of the XRAM. </p>

</div>
</div>
<a id="a0c4005e70612e6f180c8acfe32e0159d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c4005e70612e6f180c8acfe32e0159d">&sect;&nbsp;</a></span>BIT_EEABORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_EEABORT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FCS1 D-Flash Program/Erase Abort bit. </p>

</div>
</div>
<a id="a29e342b96822b9119eaa3f2f5ee3ec92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29e342b96822b9119eaa3f2f5ee3ec92">&sect;&nbsp;</a></span>BIT_EEBSY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_EEBSY&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EECON D-Flash Busy Bit. </p>

</div>
</div>
<a id="aff22c8a8699660896c046b71f1da1f7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff22c8a8699660896c046b71f1da1f7f">&sect;&nbsp;</a></span>BIT_ERASE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_ERASE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FCON/EECON Erase Bit. </p>

</div>
</div>
<a id="a10b1969a2af446cd20b4aca90d6856cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10b1969a2af446cd20b4aca90d6856cd">&sect;&nbsp;</a></span>BIT_FTEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_FTEN&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FCS Flash Timer Enable Bit. </p>

</div>
</div>
<a id="a5f333d4a000e95f5ef3ec7a6b2a41fad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f333d4a000e95f5ef3ec7a6b2a41fad">&sect;&nbsp;</a></span>BIT_MAS1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_MAS1&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FCON/EECON Mass Erase Bit. </p>

</div>
</div>
<a id="a0774d200453d65557ef39d97a02fa411"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0774d200453d65557ef39d97a02fa411">&sect;&nbsp;</a></span>BIT_MODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_MODE&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FTVAL MODE bit. </p>
<p>Controls the flash timer speed.</p>
<table class="doxtable">
<tr>
<th>Mode </th><th>Value </th><th>Effect  </th></tr>
<tr>
<td>Program </td><td>0 </td><td>1 count per <img class="formulaInl" alt="$ CCLK $" src="form_3.png"/> (24MHz) clock cycle </td></tr>
<tr>
<td>Erase </td><td>1 </td><td>1 count per <img class="formulaInl" alt="$ CCLK/2^{12} $" src="form_4.png"/> clock cycles </td></tr>
</table>

</div>
</div>
<a id="a88871f1916dc8943866ccac5916a74f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88871f1916dc8943866ccac5916a74f7">&sect;&nbsp;</a></span>BIT_NMIFLASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_NMIFLASH&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NMICON Flash Timer NMI Enable bit. </p>

</div>
</div>
<a id="a7306904c5f52abeb2daa946227b9b424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7306904c5f52abeb2daa946227b9b424">&sect;&nbsp;</a></span>BIT_NVSTR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_NVSTR&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FCON/EECON Non-Volatile Store Bit. </p>

</div>
</div>
<a id="a6eb44b05242f1173450d7dd09c134b0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eb44b05242f1173450d7dd09c134b0b">&sect;&nbsp;</a></span>BIT_OFVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_OFVAL&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FTVAL Overflow Value bits. </p>

</div>
</div>
<a id="a85e11881e343671f85e132d3e922e8c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85e11881e343671f85e132d3e922e8c1">&sect;&nbsp;</a></span>BIT_PROG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_PROG&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FCON/EECON Program Bit. </p>

</div>
</div>
<a id="a45fd1e5d3b972abac99fa379d5252a51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45fd1e5d3b972abac99fa379d5252a51">&sect;&nbsp;</a></span>BIT_YE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_YE&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FCON/EECON Y-Address Enable Bit. </p>

</div>
</div>
<a id="aaceb4fddcbdde6b5986abf7494372139"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaceb4fddcbdde6b5986abf7494372139">&sect;&nbsp;</a></span>BYTES_PAGE_DFLASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BYTES_PAGE_DFLASH&#160;&#160;&#160;(1 &lt;&lt; 6)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF the number of bytes in a D-Flash page. </p>

</div>
</div>
<a id="ab39ff9f54b1ec22b2cd87b36934a174f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab39ff9f54b1ec22b2cd87b36934a174f">&sect;&nbsp;</a></span>BYTES_PAGE_PFLASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BYTES_PAGE_PFLASH&#160;&#160;&#160;(1 &lt;&lt; 9)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF the number of bytes in a P-Flash page. </p>

</div>
</div>
<a id="a44fcc5bbafc00057fe1932fe6d44a064"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44fcc5bbafc00057fe1932fe6d44a064">&sect;&nbsp;</a></span>BYTES_WORDLINE_DFLASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BYTES_WORDLINE_DFLASH&#160;&#160;&#160;(1 &lt;&lt; 5)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF ld() of the number of bytes in a D-Flash wordline. </p>

</div>
</div>
<a id="a7d6f8614f4892322abe0aa5a0f208c43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d6f8614f4892322abe0aa5a0f208c43">&sect;&nbsp;</a></span>BYTES_WORDLINE_PFLASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BYTES_WORDLINE_PFLASH&#160;&#160;&#160;(1 &lt;&lt; 6)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF the number of bytes in a P-Flash wordline. </p>

</div>
</div>
<a id="ad41761f52336eae7096a734d59a19ef6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad41761f52336eae7096a734d59a19ef6">&sect;&nbsp;</a></span>CNT_OFVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CNT_OFVAL&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>OFVAL bit count. </p>

</div>
</div>
<a id="aa93f5c922cabf33b1f76450494373702"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa93f5c922cabf33b1f76450494373702">&sect;&nbsp;</a></span>DPH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DPH&#160;&#160;&#160;dph</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DPTR high byte. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hsk__flash_8c.html#flash_dptr">DPTR Byte Order</a> </dd></dl>

</div>
</div>
<a id="ab473c021012356601a12f5c91b09f10a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab473c021012356601a12f5c91b09f10a">&sect;&nbsp;</a></span>DPL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DPL&#160;&#160;&#160;dpl</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DPTR low byte. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hsk__flash_8c.html#flash_dptr">DPTR Byte Order</a> </dd></dl>

</div>
</div>
<a id="a6dcf2308535779a6a92b0fd3578b4c87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dcf2308535779a6a92b0fd3578b4c87">&sect;&nbsp;</a></span>FREE_BEHIND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FREE_BEHIND&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The block behind the block indicated by <a class="el" href="hsk__flash_8c.html#ac45ee148a627c5381a1d3efc38b3eb68">hsk_flash::latest</a> is available for writing. </p>

</div>
</div>
<a id="a599547a02bb0ec807dc6f487fa24c13c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a599547a02bb0ec807dc6f487fa24c13c">&sect;&nbsp;</a></span>FREE_LATEST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FREE_LATEST&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The block indicated <a class="el" href="hsk__flash_8c.html#ac45ee148a627c5381a1d3efc38b3eb68">hsk_flash::latest</a> is available for writing. </p>

</div>
</div>
<a id="a409d7efdeab550837d2c82bc84bd33fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a409d7efdeab550837d2c82bc84bd33fd">&sect;&nbsp;</a></span>FREE_NONE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FREE_NONE&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>There is no block available for writing. </p>

</div>
</div>
<a id="ace3e91566d4b07c07b7cb87aa640e9b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace3e91566d4b07c07b7cb87aa640e9b2">&sect;&nbsp;</a></span>LEN_DFLASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEN_DFLASH&#160;&#160;&#160;(4u &lt;&lt; 10)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF length of the D-Flash. </p>

</div>
</div>
<a id="a390ee3ef9811e2ea114921e1b94af3d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a390ee3ef9811e2ea114921e1b94af3d2">&sect;&nbsp;</a></span>LEN_PFLASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEN_PFLASH&#160;&#160;&#160;(60u &lt;&lt; 10)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF length of the P-Flash. </p>

</div>
</div>
<a id="a37b985d4517c943d40917f19aa13b439"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37b985d4517c943d40917f19aa13b439">&sect;&nbsp;</a></span>LEN_ROM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEN_ROM&#160;&#160;&#160;(8u &lt;&lt; 10)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF length of the Boot ROM. </p>

</div>
</div>
<a id="aa468037c6c8e20085d90dbedeacfc0cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa468037c6c8e20085d90dbedeacfc0cc">&sect;&nbsp;</a></span>LEN_XRAM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEN_XRAM&#160;&#160;&#160;(3u &lt;&lt; 10)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF length of the XRAM. </p>

</div>
</div>
<a id="ad593c8c7333fb78aec67c4e147cde3f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad593c8c7333fb78aec67c4e147cde3f1">&sect;&nbsp;</a></span>MOVCI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOVCI&#160;&#160;&#160;.db 0xA5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MOVC @(DPTR++),A instruction. </p>

</div>
</div>
<a id="af060d3595d8641ca35a256f2a8bb7838"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af060d3595d8641ca35a256f2a8bb7838">&sect;&nbsp;</a></span>PAGE_FLASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_FLASH&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF code page that has the flash. </p>

</div>
</div>
<a id="a4a3caa7861303a0ed52e5f0e47bbccf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a3caa7861303a0ed52e5f0e47bbccf3">&sect;&nbsp;</a></span>PAGE_RAM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_RAM&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XC878-16FF code page that has the Boot ROM and XRAM mapped into it. </p>

</div>
</div>
<a id="a3f99d85aaa3c31f57a9bc9771ac3c185"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f99d85aaa3c31f57a9bc9771ac3c185">&sect;&nbsp;</a></span>STATE_DELETE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATE_DELETE&#160;&#160;&#160;40</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The state to use when erasing D-Flash pages. </p>

</div>
</div>
<a id="ac3bd49a6808ba1a64a446fdd14cb2a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3bd49a6808ba1a64a446fdd14cb2a21">&sect;&nbsp;</a></span>STATE_DETECT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATE_DETECT&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The state that decides whether a delete or idle is appropriate. </p>

</div>
</div>
<a id="aafff27c7165f059a969fe60fee51f683"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafff27c7165f059a969fe60fee51f683">&sect;&nbsp;</a></span>STATE_IDLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATE_IDLE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The state to use when nothing is to be done. </p>

</div>
</div>
<a id="a1df21239e296048dbf9042363ea9dd5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1df21239e296048dbf9042363ea9dd5c">&sect;&nbsp;</a></span>STATE_REQUEST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATE_REQUEST&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The state to use to kick off a write. </p>

</div>
</div>
<a id="aca5b07fcfc6232419b09792f733b45a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca5b07fcfc6232419b09792f733b45a3">&sect;&nbsp;</a></span>STATE_RESET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATE_RESET&#160;&#160;&#160;60</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The state to use when mass erasing the D-Flash. </p>

</div>
</div>
<a id="ab7c1751184e92365d47d7f26e539be6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7c1751184e92365d47d7f26e539be6c">&sect;&nbsp;</a></span>STATE_WRITE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATE_WRITE&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The state to use when starting to write to the D-Flash. </p>

</div>
</div>
<a id="a9a5e611929450e2fd5aafd72751fb82d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a5e611929450e2fd5aafd72751fb82d">&sect;&nbsp;</a></span>VAR_ASM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VAR_ASM</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name</td><td>)</td>
          <td>&#160;&#160;&#160;_##name</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Insert global variable address into inline assembler SDCC style. </p>

</div>
</div>
<a id="ae2c9286c943d66d51926643b4aff8afa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2c9286c943d66d51926643b4aff8afa">&sect;&nbsp;</a></span>VAR_AT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VAR_AT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">addr&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;type __at(addr) name</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create variable at a certain address, SDCC version. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="acc2074fa68d4da24fb483fbd49438da9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc2074fa68d4da24fb483fbd49438da9">&sect;&nbsp;</a></span>hsk_flash_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ubyte hsk_flash_init </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uword&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ubyte&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recovers a struct from a previous session and sets everything up for storage of changes. </p>
<p>There are two modes of recovery. After a fresh boot the data can be recovered from flash, if previously stored there. After a simple reset the data can still be found in XRAM and recovery can be sped up.</p>
<p>If recovery fails entirely all members of the struct will be set to 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">version</td><td>Version number of the persisted data structure, used to prevent initilization with incompatible data </td></tr>
    <tr><td class="paramname">ptr</td><td>A pointer to the xdata struct/array to persist </td></tr>
    <tr><td class="paramname">size</td><td>The size of the data structure to persist </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FLASH_PWR_FIRST</td><td>No valid data was recovered </td></tr>
    <tr><td class="paramname">FLASH_PWR_RESET</td><td>Continue operation after a reset </td></tr>
    <tr><td class="paramname">FLASH_PWR_ON</td><td>Data restore from the D-Flash succeeded </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="hsk__flash_8c_acc2074fa68d4da24fb483fbd49438da9_cgraph.svg" width="430" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a77546a0379b312a73b5a107fc9b196c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77546a0379b312a73b5a107fc9b196c1">&sect;&nbsp;</a></span>hsk_flash_isr_nmiflash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void hsk_flash_isr_nmiflash </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flash delete/write state machine. </p>
<p>Every named state is the root of a state machine that performs a specific task.</p>
<dl class="section see"><dt>See also</dt><dd>Section 4.4 <em>Flash Memory</em> - <em>Operating Modes</em> from the XC8787 reference manual: <a href="../contrib/XC878_um_v1_1.pdf">XC878_um_v1_1.pdf</a> </dd></dl>
<ul>
<li><a class="el" href="hsk__flash_8c.html#aafff27c7165f059a969fe60fee51f683">STATE_IDLE</a> is a sleeping state that turns off the state machine. This state is a dead end, the state machine has to be reactivated externally to resume operation.</li>
<li><p class="startli"><a class="el" href="hsk__flash_8c.html#a1df21239e296048dbf9042363ea9dd5c">STATE_REQUEST</a> implements the procedure called "Abort Operation" from the XC878 UM 1.1.</p>
<p class="startli">After completing the abort <a class="el" href="hsk__flash_8c.html#ab7c1751184e92365d47d7f26e539be6c">STATE_WRITE</a> is entered.</p>
</li>
<li><p class="startli"><a class="el" href="hsk__flash_8c.html#ac3bd49a6808ba1a64a446fdd14cb2a21">STATE_DETECT</a> checks whether there is a page that should be deleted.</p>
<p class="startli">It either goes into <a class="el" href="hsk__flash_8c.html#a3f99d85aaa3c31f57a9bc9771ac3c185">STATE_DELETE</a> or <a class="el" href="hsk__flash_8c.html#aafff27c7165f059a969fe60fee51f683">STATE_IDLE</a>.</p>
</li>
<li><p class="startli"><a class="el" href="hsk__flash_8c.html#ab7c1751184e92365d47d7f26e539be6c">STATE_WRITE</a> implements the procedure called "Program Operation" from the XC878 UM 1.1.</p>
<p class="startli">The next address to write is expected in <a class="el" href="hsk__flash_8c.html#a051e65e6d6116e77db20018284566d93">flashDptr</a>. The next address to read from XRAM is expected in <a class="el" href="hsk__flash_8c.html#afb373a158f1c3aba3ecf318594ef9345">xdataDptr</a>.</p>
</li>
<li><a class="el" href="hsk__flash_8c.html#a3f99d85aaa3c31f57a9bc9771ac3c185">STATE_DELETE</a> implements the procedure called "Erase Operation" from the XC878 UM 1.1.</li>
<li><a class="el" href="hsk__flash_8c.html#aca5b07fcfc6232419b09792f733b45a3">STATE_RESET</a> implements the procedure called "Mass Erase Operation" from the XC878 UM 1.1.</li>
</ul>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="hsk__flash_8c_a77546a0379b312a73b5a107fc9b196c1_cgraph.svg" width="279" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a36a01af82333ae82b381cd939fcd421f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36a01af82333ae82b381cd939fcd421f">&sect;&nbsp;</a></span>hsk_flash_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hsk_flash_write </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the current data to the D-Flash. </p>
<p>Ongoing writes are interrupted. Ongoing deletes are interrupted unless there is insufficient space left to write the data.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>The D-Flash write is on the way </td></tr>
    <tr><td class="paramname">0</td><td>Not enough free D-Flash space to write, try again later </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a8a49b1a169dc95a28adc1175c6db0f30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a49b1a169dc95a28adc1175c6db0f30">&sect;&nbsp;</a></span>dflash</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const ubyte dflash[(4u&lt;&lt; 10)]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Bytewise access to the D-Flash area. </p>

</div>
</div>
<a id="afb1378f9b2bfec0d3fb6786c5fd2da47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb1378f9b2bfec0d3fb6786c5fd2da47">&sect;&nbsp;</a></span>EECON</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SFR EECON = 0xD2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>D-Flash Control Register. </p>

</div>
</div>
<a id="a93d2892a22773262b195e008861f261c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93d2892a22773262b195e008861f261c">&sect;&nbsp;</a></span>FCON</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SFR FCON = 0xD1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>P-Flash Control Register. </p>

</div>
</div>
<a id="ab4472d2e34acc50d38c971464610dc5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4472d2e34acc50d38c971464610dc5c">&sect;&nbsp;</a></span>FCS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SFR FCS = 0xD3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash Control and Status Register. </p>

</div>
</div>
<a id="aa93dd3cdb675ba294a57e8e55d9f751a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa93dd3cdb675ba294a57e8e55d9f751a">&sect;&nbsp;</a></span>FCS1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SFR FCS1 = 0xDD</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash Control and Status Register 1. </p>

</div>
</div>
<a id="a4a0a93ca1e1f7fae6564ddaec0808851"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a0a93ca1e1f7fae6564ddaec0808851">&sect;&nbsp;</a></span>FEAH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SFR FEAH = 0xD5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash Error Address Register High. </p>

</div>
</div>
<a id="a0025990727790627ee5d2fdbc19a5895"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0025990727790627ee5d2fdbc19a5895">&sect;&nbsp;</a></span>FEAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SFR FEAL = 0xD4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash Error Address Register Low. </p>

</div>
</div>
<a id="a6cc750e8fe87de54fc32bd1b5b27cad4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cc750e8fe87de54fc32bd1b5b27cad4">&sect;&nbsp;</a></span>FEALH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SFR16 FEALH = 0xD4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash Error Address Register Low and High (16 bits). </p>

</div>
</div>
<a id="af7169dec2a062f35b48b53a5a6d765f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7169dec2a062f35b48b53a5a6d765f4">&sect;&nbsp;</a></span>flash</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">flash</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holds the persistence configuration. </p>

</div>
</div>
<a id="a051e65e6d6116e77db20018284566d93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a051e65e6d6116e77db20018284566d93">&sect;&nbsp;</a></span>flashDptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile ubyte* flashDptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A pointer to the flash target address. </p>
<p>Not in a struct for easier inline assembler access. </p>

</div>
</div>
<a id="a220be22f3a009b06f7a50f16ca1b61d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a220be22f3a009b06f7a50f16ca1b61d6">&sect;&nbsp;</a></span>free</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ubyte free</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This byte indicates where free space can be found in the D-Flash. </p>
<p>Available values are:</p><ul>
<li><a class="el" href="hsk__flash_8c.html#a599547a02bb0ec807dc6f487fa24c13c">FREE_LATEST</a></li>
<li><a class="el" href="hsk__flash_8c.html#a6dcf2308535779a6a92b0fd3578b4c87">FREE_BEHIND</a></li>
<li><a class="el" href="hsk__flash_8c.html#a409d7efdeab550837d2c82bc84bd33fd">FREE_NONE</a> </li>
</ul>

</div>
</div>
<a id="a525bb521474158f60045c9be8e202417"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a525bb521474158f60045c9be8e202417">&sect;&nbsp;</a></span>FTVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SFR FTVAL = 0xD6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash Timer Value Register. </p>

</div>
</div>
<a id="a52c92ae81f8d5f16d15422fb3838fe27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52c92ae81f8d5f16d15422fb3838fe27">&sect;&nbsp;</a></span>ident</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ubyte ident</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The prefix/postfix to identify the data structure in the flash. </p>
<p>It consist of the last 6 bits of the version and two alternating bits to make sure the value can neither become 0x00 nor 0xff.</p>
<p>Pre-/postfixing the ident ensures that the data was completely written. </p>

</div>
</div>
<a id="ac45ee148a627c5381a1d3efc38b3eb68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac45ee148a627c5381a1d3efc38b3eb68">&sect;&nbsp;</a></span>latest</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uword latest</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The offset of the latest data in the D-Flash. </p>

</div>
</div>
<a id="aa05f5967d4691b0fcd9920dfaa56106d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa05f5967d4691b0fcd9920dfaa56106d">&sect;&nbsp;</a></span>oldest</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uword oldest</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The offset of the oldest data in the D-Flash. </p>

</div>
</div>
<a id="aeb05b4bef946b7e657493024adb51321"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb05b4bef946b7e657493024adb51321">&sect;&nbsp;</a></span>ptr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ubyte* ptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The pointer to the data structure to persist. </p>

</div>
</div>
<a id="a1ed0c25d910b90b08428b6aeafb43ee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ed0c25d910b90b08428b6aeafb43ee9">&sect;&nbsp;</a></span>size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uword size</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The size of the data structure to persist. </p>

</div>
</div>
<a id="a6f76333f788c209cea43c4410335d980"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f76333f788c209cea43c4410335d980">&sect;&nbsp;</a></span>state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ubyte state</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The current state of the flash ISR state machine. </p>

</div>
</div>
<a id="a471604319e7b5eda76de9e949a9af404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a471604319e7b5eda76de9e949a9af404">&sect;&nbsp;</a></span>wrap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uword wrap</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The useable amount of D-Flash. </p>

</div>
</div>
<a id="afb373a158f1c3aba3ecf318594ef9345"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb373a158f1c3aba3ecf318594ef9345">&sect;&nbsp;</a></span>xdataDptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile ubyte* xdataDptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A pointer to the xdata src address. </p>
<p>Not in a struct for easier inline assembler access. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jan 20 2017 00:01:51 for hsk-libs-dev by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
